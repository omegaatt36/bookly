{{define "title"}}Edit Budget{{end}}

{{define "content"}}
<div class="container">
    <h2>Edit Budget: {{.Budget.Name}}</h2>

    {{template "partials/flash_messages" .}}

    <form action="/budgets/{{.Budget.ID}}" method="POST">
        <!-- CSRF Token -->
        <!-- <input type="hidden" name="csrf_token" value="{{.CSRFToken}}"> -->
        <!-- Method override if using PUT, e.g. <input type="hidden" name="_method" value="PUT"> -->
        
        <div class="mb-3">
            <label for="name" class="form-label">Budget Name</label>
            <input type="text" class="form-control" id="name" name="name" value="{{.Budget.Name}}" required>
        </div>

        <div class="mb-3">
            <label for="period" class="form-label">Period</label>
            <select class="form-select" id="period" name="period" required>
                <option value="">Select Period</option>
                {{range .Periods}}
                    <option value="{{.Value}}" {{if eq .Value $.Budget.Period}}selected{{end}}>{{.Label}}</option>
                {{end}}
            </select>
        </div>
        
        <div class="mb-3">
            <label for="start_date" class="form-label">Start Date</label>
            <input type="date" class="form-control" id="start_date" name="start_date" value="{{.Budget.StartDate.Format "2006-01-02"}}">
        </div>

        <div class="mb-3">
            <label for="amount" class="form-label">Amount</label>
            <input type="number" step="0.01" class="form-control" id="amount" name="amount" value="{{.Budget.Amount.StringFixed 2}}" required>
        </div>

        <div class="mb-3">
            <label for="category_id" class="form-label">Category</label>
            <select class="form-select" id="category_id" name="category_id" required>
                <option value="">Select Category</option>
                {{range .Categories}}
                    <option value="{{.ID}}" {{if eq .ID $.Budget.CategoryID}}selected{{end}}>{{.Name}}</option>
                {{end}}
            </select>
        </div>
        
        <button type="submit" class="btn btn-primary">Update Budget</button>
        <a href="/budgets" class="btn btn-secondary">Cancel</a>
    </form>
</div>
{{end}}
